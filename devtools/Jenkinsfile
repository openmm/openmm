pipeline {
    agent any

    stages {
        stage("Build and test") {
            agent {
                dockerfile {
                    dir "devtools/ci/jenkins"
                    label "cuda"
                }
            }
            steps {
                sh 'git clean -fxd; git checkout .'
                sh 'bash devtools/ci/jenkins/install.sh'
            }
        }
    }
}